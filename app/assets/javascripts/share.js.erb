/* Objects shared over application
/* Day Name Strings */
 var  ru_Date =
  {
    dayNames: ["воскресенье", "понедельник", "вторник", "среда", "четверг", "пятница", "суббота"],
    abbreviatedDayNames: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"],
    shortestDayNames: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"],
    firstLetterDayNames: ["В", "П", "В", "С", "Ч", "П", "С"],

    /* Month Name Strings */
    monthNames: ["января", "февраля", "марта", "апреля", "мая", "июня", "июля", "августа", "сентября", "октября", "ноябрь", "декабря"],
    abbreviatedMonthNames: ["янв", "фев", "мар", "апр", "май", "июн", "июл", "авг", "сен", "окт", "ноя", "дек"]
  }

$(document).ready(function() {
  setInterval(function() {
  var date_now = new Date();
  $(".datetime .date").html(
    ru_Date.abbreviatedDayNames[date_now.getDay()] +
    ' ' +
    date_now.getDate() +
    ' ' +
    ru_Date.monthNames[date_now.getMonth()] +
    ' ' +
    date_now.getFullYear() +
    ' г.'
    );
  $(".datetime .time").html(
    ' | ' +
    date_now.toLocaleTimeString() +
    ' | '
    );
  },500)
});

function log (argument) {
  console.log(argument)
}

function hint(car_wash) {
  var timeNow = new Date;
  var wrapper_begin = '<div class="hint">'
  var wrapper_end = '</div>'
  var part1 = '<h3>' + car_wash.title.toUpperCase() + '</h3>'
      + '<h5>' + 'Адрес: ' + car_wash.address + '</h5>'
      + '<h3>Время:  ' + timeNow.toLocaleTimeString() + '</h3>'
      + '<h3 class="red">' + (car_wash.main_action == null ? '' : car_wash.main_action)   + '</h3>';
  var part3 = '<img src="';
  var part4 = '">';
  if (car_wash.signal) {
    var ret = wrapper_begin + part1 + part3 + "<%= asset_path('green.png') %>" + part4 + wrapper_end;
  } else {
    ret = wrapper_begin + part1 + part3 + "<%= asset_path('red.png') %>" + part4 + wrapper_end;
  }
  return ret;
    
}

function balloon(car_wash) {
  var part1 = 
      '<h3>'
      + car_wash.title
      + '</h3>'
      + car_wash.address
      + '<br/>'
      + car_wash.contacts
      + '<br/>'
      + car_wash.services
      + '<br/>';

  if (car_wash.signal) {
    var ret = part1
      + 'Пост свободен'
      + '<br/>'
      + '<img src="'
      + "<%= asset_path('banner_green.png') %>"
      + '">'
      + '<br/>'
      + '<a href="'
      + car_wash.url
      + '">Перейти на страницу этой мойки</a>';
  } else {
    var ret = part1
      + 'Пост загружен'
      + '<br/>'
      + '<img src="'
      + "<%= asset_path('banner_red.png') %>"
      + '">'
      + '<br/>'
      + '<a href="'
      + car_wash.url
      + '">Перейти на страницу этой мойки</a>';
  }
  return ret;
}
